{"version":3,"sources":["pkg/base/TransformEngine.ts","pkg/transformers/Unescape.ts","pkg/transformers/JsonBeautify.ts","pkg/transformers/Replace.ts","pkg/base/TransformerBlueprint.ts","pkg/ui/TransformerOptionsEmpty.tsx","pkg/ui/TransformerOptionsReplace.tsx","pkg/ui/TransformerNode.tsx","pkg/ui/TransformEngineComponent.tsx","pkg/ui/Main.tsx","App.tsx","index.tsx"],"names":["TransformEngine","_transformers","this","input","push","index","result","transformers","forEach","trans","_a","transformData","from","Unescape","replace","i","n","JsonBeautify","obj","JSON","parse","e","stringify","Replace","old","new","useRegEx","length","replaceAll","RegExp","p","TransformerBlueprint","make","newInstance","name","allTransformers","get","Map","TransformerOptionsEmpty","TransformerOptionsReplace","transformer","onChange","setReplacer","fromPartial","InputGroup","className","Text","id","DropdownButton","title","variant","onSelect","eventKey","Dropdown","Item","FormControl","placeholder","event","currentTarget","value","TransformerNode","props","Accordion","toString","Header","Body","TransformEngineComponent","useState","engine","setEngine","useEffect","map","_","updated","replaceTransformer","prevState","clone","handleChangeTransformer","transformerMeta","forName","addTransformer","handleAddTransformer","all","key","as","renderSupportedNodes","Main","setInput","output","setOutput","Row","Col","md","span","offset","FloatingLabel","controlId","label","Form","Control","style","height","readOnly","App","Container","fluid","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sQAsCeA,E,iDA7BLC,cAAqC,G,8CAC7C,WACE,OAAOC,KAAKD,gB,4BAGd,SAAeE,GACbD,KAAKD,cAAcG,KAAKD,K,gCAG1B,SAAmBE,EAAeF,GAC5BD,KAAKD,cAAcI,KACrBH,KAAKD,cAAcI,GAASF,K,2BAIhC,SAAcA,GACZ,IAAIG,EAASH,EAIb,OAHAD,KAAKK,aAAaC,SAAQ,SAACC,EAAOJ,EAAOK,GACvCJ,EAASG,EAAME,cAAcL,MAExBA,I,kBAIT,WACE,MAAO,sB,oBA/BT,SAAaM,GACX,IAAIN,EAAS,IAAIN,EAEjB,OADAM,EAAOL,cAAgBW,EAAKL,aACrBD,M,6BCJUO,E,6FACnB,SAAcV,GAEZ,OAAOA,EAAMW,QACT,WACA,SAAUC,EAAGC,GACX,MAAa,OAANA,EAAa,KAAa,MAANA,EAAY,KAAa,MAANA,EAAY,KAAY,KAANA,EAAW,GAAKA,O,kBAIxF,WACE,MAAO,e,KCXUC,E,oFACnB,WACE,MAAO,kB,2BAGT,SAAcd,GACZ,IAAIe,EAAM,GACV,IACEA,EAAMC,KAAKC,MAAMjB,GACjB,MAAOkB,GACP,MAAO,sBAET,OAAOF,KAAKG,UAAUJ,EAAK,KAAM,O,KCZhBK,E,iDACZC,IAAc,G,KACdC,IAAc,G,KACdC,UAAoB,E,wCAE3B,WACE,MAAO,Y,2BAGT,SAAcvB,GACZ,OAAwB,IAApBD,KAAKsB,IAAIG,OACJxB,EAGLD,KAAKwB,SACAvB,EAAMyB,WAAW,IAAIC,OAAO3B,KAAKsB,KAAMtB,KAAKuB,KAE5CtB,EAAMyB,WAAW1B,KAAKsB,IAAKtB,KAAKuB,Q,0BAI3C,SAAmBK,GAA+B,IAAD,MAC3CxB,EAAS,IAAIiB,EAIjB,OAHAjB,EAAOkB,IAAP,UAAaM,EAAEN,WAAf,QAAsB,GACtBlB,EAAOmB,IAAP,UAAaK,EAAEL,WAAf,QAAsB,GACtBnB,EAAOoB,SAAP,UAAkBI,EAAEJ,gBAApB,SACOpB,M,KCrBUyB,E,WAGnB,WAAYC,GAAkC,yBAF9CC,iBAE6C,EAC3C/B,KAAK+B,YAAcD,E,gDASrB,SAAeE,GACb,OAAOhC,KAAKiC,gBAAgBC,IAAIF,K,iBAGlC,WACE,OAAOhC,KAAKiC,oB,KAlBKJ,EAOJI,gBAAqD,IAAIE,IAAkC,CACxG,CAAC,WAAY,IAAIN,GAAqB,kBAAM,IAAIlB,MAChD,CAAC,eAAgB,IAAIkB,GAAqB,kBAAM,IAAId,MACpD,CAAC,UAAW,IAAIc,GAAqB,kBAAM,IAAIR,Q,WCjBtCe,EAA0B,WACrC,OACI,uD,uBCOOC,EAA4B,SAAC,GAAoC,IAAnCC,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,SAChDC,EAAc,SAACvC,GACfsC,GACFA,EAASlB,EAAQoB,YAAYxC,KAIjC,OACI,gCACE,eAACyC,EAAA,EAAD,CAAYC,UAAU,OAAtB,UACE,cAACD,EAAA,EAAWE,KAAZ,CAAiBC,GAAG,UAApB,qBACA,eAACC,EAAA,EAAD,CACID,GAAG,UACHE,MAAOT,EAAYd,SAAW,QAAU,OACxCwB,QAAQ,oBACRC,SAAU,SAACC,GAAD,OAAcV,EAAY,2BAAIF,GAAL,IAAkBd,SAAuB,UAAb0B,MAJnE,UAKE,cAACC,EAAA,EAASC,KAAV,CAAeF,SAAS,OAAxB,kBACA,cAACC,EAAA,EAASC,KAAV,CAAeF,SAAS,QAAxB,sBAEF,cAACG,EAAA,EAAD,CACIC,YAAahB,EAAYhB,IACzBiB,SAAU,SAACgB,GAAD,OAAWf,EAAY,2BAAIF,GAAL,IAAkBhB,IAAKiC,EAAMC,cAAcC,eAEjF,eAACf,EAAA,EAAD,CAAYC,UAAU,OAAtB,UACE,cAACD,EAAA,EAAWE,KAAZ,CAAiBC,GAAG,OAApB,kBACA,cAACQ,EAAA,EAAD,CACIC,YAAahB,EAAYf,IACzBgB,SAAU,SAACgB,GAAD,OAAWf,EAAY,2BAAIF,GAAL,IAAkBf,IAAKgC,EAAMC,cAAcC,mBCtB5EC,EAAkB,SAACC,GAC9B,IAAoBrB,EAWpB,OACI,eAACsB,EAAA,EAAUR,KAAX,CAEIF,SAAUS,EAAMxD,MAAM0D,WAF1B,UAGE,cAACD,EAAA,EAAUE,OAAX,UACGH,EAAMrB,YAAYN,SAErB,cAAC4B,EAAA,EAAUG,KAAX,WAlBczB,EAmBAqB,EAAMrB,YAlBpBA,aAAuBjB,EAClB,cAAC,EAAD,CACHiB,YAAaA,EACbC,SAAU,SAACD,GAAD,uBAAiBqB,EAAMpB,gBAAvB,aAAiB,OAAAoB,EAAiBA,EAAMxD,MAAOmC,MAGtD,cAAC,EAAD,SAMEqB,EAAMxD,MAAM0D,aC8CZG,EA/DkB,SAAC,GAAuB,IAAtBzB,EAAqB,EAArBA,SAAqB,EAC1B0B,mBAAS,IAAInE,GADa,mBAC/CoE,EAD+C,KACvCC,EADuC,KAGtDC,qBAAU,WACJ7B,GACFA,EAAS2B,KAEV,CAACA,EAAQ3B,IAiCZ,OACI,gCACE,cAACqB,EAAA,EAAD,UAEIM,EAAO7D,aAAagE,KAChB,SAAC/B,EAAanC,EAAOmE,GAArB,OACI,cAAC,EAAD,CAAiBnE,MAAOA,EAEPmC,YAAaA,EACbC,SAAU,SAACpC,EAAOoE,GAAR,OAzB7C,SAAiCpE,EAAemC,GAC9C4B,EAAOM,mBAAmBrE,EAAOmC,GAEjC6B,GAAU,SAAAM,GAAS,OAAI3E,EAAgB4E,MAAMD,MAsBkBE,CAAwBxE,EAAOoE,KAFxDpE,EAAM0D,iBAQxC,cAACf,EAAA,EAAD,CAAgBD,GAAG,uBAAuBE,MAAM,WAChCE,SAAU,SAACC,GAAD,OA/CH,SAACA,GAC5B,GAAKA,EAAL,CAIA,IAAI0B,EAAkB/C,EAAqBgD,QAAQ3B,GAC9C0B,IAILV,EAAOY,eAAeF,EAAgB7C,eAEtCoC,GAAU,SAAAM,GAAS,OAAI3E,EAAgB4E,MAAMD,QAmCDM,CAAqB7B,IAD7D,SAzBuB,WAC3B,IAAI9C,EAAwB,GAM5B,OALAyB,EAAqBmD,MAAM1E,SAAQ,SAACmD,EAAOwB,EAAKX,GAAb,OAAmBlE,EAAOF,KACzD,cAACiD,EAAA,EAASC,KAAV,CACI8B,GAAG,SAEHhC,SAAU+B,EAHd,SAGoBxB,EAAM1B,cAAcC,QAD/BiD,OAEN7E,EAoBA+E,SCfIC,EAhDK,WAAO,IAAD,EACEnB,mBAAiB,IADnB,mBACjBhE,EADiB,KACVoF,EADU,OAEIpB,mBAA0B,IAAInE,GAFlC,mBAEjBoE,EAFiB,KAETC,EAFS,OAGIF,mBAAiB,IAHrB,mBAGjBqB,EAHiB,KAGTC,EAHS,KASxB,OAJAnB,qBAAU,WACRmB,EAAUrB,EAAOzD,cAAcR,MAC9B,CAACiE,EAAQjE,IAGR,sBAAK0C,UAAU,OAAf,UACE,cAAC6C,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAKC,GAAI,CAACC,KAAM,EAAGC,OAAQ,GAA3B,SACE,cAACC,EAAA,EAAD,CAAeC,UAAU,gBAAgBC,MAAM,QAA/C,SACE,cAACC,EAAA,EAAKC,QAAN,CACIf,GAAG,WACH5B,YAAY,QACZ4C,MAAO,CAACC,OAAQ,SAChB5D,SAAU,SAACgB,GACT8B,EAAS9B,EAAMC,cAAcC,gBAMzC,cAAC+B,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAKC,GAAI,CAACC,KAAM,EAAGC,OAAQ,GAA3B,SACE,cAAC,EAAD,CACIrD,SAAU4B,QAGlB,cAACqB,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAKC,GAAI,CAACC,KAAM,EAAGC,OAAQ,GAA3B,SACE,cAACC,EAAA,EAAD,CAAeC,UAAU,iBAAiBC,MAAM,SAAhD,SACE,cAACC,EAAA,EAAKC,QAAN,CACIf,GAAG,WACH5B,YAAY,QACZ4C,MAAO,CAACC,OAAQ,SAChB1C,MAAO6B,EACPc,UAAU,cChCbC,EARH,kBACR,qBAAK1D,UAAU,MAAf,SACE,cAAC2D,EAAA,EAAD,CAAWC,MAAO,KAAlB,SACE,cAAC,EAAD,S,MCDRC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.59183c85.chunk.js","sourcesContent":["import {StringTransformer} from \"./StringTransformer\";\n\nclass TransformEngine implements StringTransformer {\n  static clone(from: TransformEngine): TransformEngine {\n    let result = new TransformEngine()\n    result._transformers = from.transformers\n    return result\n  }\n\n  private _transformers: StringTransformer[] = [];\n  get transformers(): StringTransformer[] {\n    return this._transformers;\n  }\n\n  addTransformer(input: StringTransformer) {\n    this._transformers.push(input)\n  }\n\n  replaceTransformer(index: number, input: StringTransformer) {\n    if (this._transformers[index]) {\n      this._transformers[index] = input\n    }\n  }\n\n  transformData(input: string): string {\n    let result = input\n    this.transformers.forEach((trans, index, _a) => {\n      result = trans.transformData(result)\n    })\n    return result\n  }\n\n\n  name(): string {\n    return \"Transform Engine\";\n  }\n}\n\nexport default TransformEngine\n","import {StringTransformer} from \"../base/StringTransformer\";\n\nexport default class Unescape implements StringTransformer {\n  transformData(input: string): string {\n    // TODO: https://onlinestringtools.com/unescape-string\n    return input.replace(\n        /\\\\(.?)/g,\n        function (i, n) {\n          return n === \"\\\\\" ? \"\\\\\" : n === \"n\" ? \"\\n\" : n === \"t\" ? \"\t\" : n === \"\" ? \"\" : n\n        })\n  }\n\n  name(): string {\n    return \"Unescape\";\n  }\n}\n","import {StringTransformer} from \"../base/StringTransformer\";\n\nexport default class JsonBeautify implements StringTransformer {\n  name(): string {\n    return \"JSON Beautify\";\n  }\n\n  transformData(input: string): string {\n    let obj = {}\n    try {\n      obj = JSON.parse(input);\n    } catch (e) {\n      return \"Invalid JSON string\";\n    }\n    return JSON.stringify(obj, null, 4);\n  }\n}","import {StringTransformer} from \"../base/StringTransformer\";\n\nexport default class Replace implements StringTransformer {\n  public old: string = \"\";\n  public new: string = \"\";\n  public useRegEx: boolean = false;\n\n  name(): string {\n    return \"Replace\";\n  }\n\n  transformData(input: string): string {\n    if (this.old.length === 0) {\n      return input\n    }\n\n    if (this.useRegEx) {\n      return input.replaceAll(new RegExp(this.old), this.new)\n    } else {\n      return input.replaceAll(this.old, this.new)\n    }\n  }\n\n  static fromPartial(p: Partial<Replace>): Replace {\n    let result = new Replace()\n    result.old = p.old ?? \"\"\n    result.new = p.new ?? \"\"\n    result.useRegEx = p.useRegEx ?? false\n    return result\n  }\n}","import Unescape from \"../transformers/Unescape\";\nimport {StringTransformer} from \"./StringTransformer\";\nimport JsonBeautify from \"../transformers/JsonBeautify\";\nimport Replace from \"../transformers/Replace\";\n\ntype CreateTransformerFunction = () => StringTransformer;\n\nexport default class TransformerBlueprint {\n  newInstance: CreateTransformerFunction\n\n  constructor(make: CreateTransformerFunction) {\n    this.newInstance = make;\n  }\n\n  private static allTransformers: Map<string, TransformerBlueprint> = new Map<string, TransformerBlueprint>([\n    [\"unescape\", new TransformerBlueprint(() => new Unescape())],\n    [\"jsonbeautify\", new TransformerBlueprint(() => new JsonBeautify())],\n    [\"replace\", new TransformerBlueprint(() => new Replace())]\n  ])\n\n  static forName(name: string): (TransformerBlueprint | undefined) {\n    return this.allTransformers.get(name)\n  }\n\n  static all(): Map<string, TransformerBlueprint> {\n    return this.allTransformers\n  }\n}\n","export const TransformerOptionsEmpty = () => {\n  return (\n      <div>No option available</div>\n  )\n}\n\n","import {Dropdown, DropdownButton, FormControl, InputGroup} from \"react-bootstrap\";\nimport Replace from \"../transformers/Replace\";\nimport React from \"react\";\n\ninterface Props {\n  transformer: Replace\n  onChange?: (updated: Replace) => void\n}\n\nexport const TransformerOptionsReplace = ({transformer, onChange}: Props) => {\n  const setReplacer = (input: Partial<Replace>) => {\n    if (onChange) {\n      onChange(Replace.fromPartial(input))\n    }\n  }\n\n  return (\n      <div>\n        <InputGroup className=\"mb-3\">\n          <InputGroup.Text id=\"replace\">Replace</InputGroup.Text>\n          <DropdownButton\n              id=\"isRegex\"\n              title={transformer.useRegEx ? \"regex\" : \"text\"}\n              variant=\"outline-secondary\"\n              onSelect={(eventKey) => setReplacer({...transformer, useRegEx: eventKey === \"regex\"})}>\n            <Dropdown.Item eventKey=\"text\">text</Dropdown.Item>\n            <Dropdown.Item eventKey=\"regex\">regex</Dropdown.Item>\n          </DropdownButton>\n          <FormControl\n              placeholder={transformer.old}\n              onChange={(event) => setReplacer({...transformer, old: event.currentTarget.value})}/>\n        </InputGroup>\n        <InputGroup className=\"mb-3\">\n          <InputGroup.Text id=\"with\">with</InputGroup.Text>\n          <FormControl\n              placeholder={transformer.new}\n              onChange={(event) => setReplacer({...transformer, new: event.currentTarget.value})}/>\n        </InputGroup>\n      </div>\n  )\n}","import {Accordion} from \"react-bootstrap\";\nimport React from \"react\";\nimport {StringTransformer} from \"../base/StringTransformer\";\nimport Replace from \"../transformers/Replace\";\nimport { TransformerOptionsEmpty } from \"./TransformerOptionsEmpty\";\nimport {TransformerOptionsReplace} from \"./TransformerOptionsReplace\";\n\ninterface Props {\n  index: number\n  transformer: StringTransformer\n  children?: React.ReactNode\n  onChange?: (index: number, updated: StringTransformer) => void\n}\n\nexport const TransformerNode = (props: Props) => {\n  const optionBody = (transformer: StringTransformer): React.ReactNode => {\n    if (transformer instanceof Replace) {\n      return <TransformerOptionsReplace\n          transformer={transformer}\n          onChange={(transformer) => props.onChange?.(props.index, transformer)}\n      />\n    } else {\n      return <TransformerOptionsEmpty/>\n    }\n  }\n\n  return (\n      <Accordion.Item\n          key={props.index.toString()}\n          eventKey={props.index.toString()}>\n        <Accordion.Header>\n          {props.transformer.name()}\n        </Accordion.Header>\n        <Accordion.Body>\n          {optionBody(props.transformer)}\n        </Accordion.Body>\n      </Accordion.Item>\n  );\n}\n","import TransformEngine from \"../base/TransformEngine\";\nimport {Accordion, Dropdown, DropdownButton} from \"react-bootstrap\";\nimport React, {useEffect, useState} from \"react\";\nimport TransformerBlueprint from \"../base/TransformerBlueprint\";\nimport {TransformerNode} from \"./TransformerNode\";\nimport {StringTransformer} from \"../base/StringTransformer\";\n\ninterface Props {\n  onChange?: (engine: TransformEngine) => void\n}\n\nconst TransformEngineComponent = ({onChange}: Props) => {\n  const [engine, setEngine] = useState(new TransformEngine())\n\n  useEffect(() => {\n    if (onChange) {\n      onChange(engine)\n    }\n  }, [engine, onChange])\n\n  const handleAddTransformer = (eventKey: string | null) => {\n    if (!eventKey) {\n      return\n    }\n\n    let transformerMeta = TransformerBlueprint.forName(eventKey)\n    if (!transformerMeta) {\n      return\n    }\n\n    engine.addTransformer(transformerMeta.newInstance())\n\n    setEngine(prevState => TransformEngine.clone(prevState))\n  }\n\n  function handleChangeTransformer(index: number, transformer: StringTransformer) {\n    engine.replaceTransformer(index, transformer)\n\n    setEngine(prevState => TransformEngine.clone(prevState))\n  }\n\n  const renderSupportedNodes = () => {\n    let result: JSX.Element[] = []\n    TransformerBlueprint.all().forEach((value, key, _) => result.push(\n        <Dropdown.Item\n            as=\"button\"\n            key={key}\n            eventKey={key}>{value.newInstance().name()}</Dropdown.Item>));\n    return result\n  }\n\n  return (\n      <div>\n        <Accordion>\n          {\n            engine.transformers.map(\n                (transformer, index, _) =>\n                    <TransformerNode index={index}\n                                     key={index.toString()}\n                                     transformer={transformer}\n                                     onChange={(index, updated) => handleChangeTransformer(index, updated)}\n                    />\n            )\n          }\n        </Accordion>\n\n        <DropdownButton id=\"dropdown-item-button\" title=\"Add node\"\n                        onSelect={(eventKey) => handleAddTransformer(eventKey)}>\n          {renderSupportedNodes()}\n        </DropdownButton>\n      </div>\n  )\n}\n\nexport default TransformEngineComponent;\n","import React, {useEffect, useState} from \"react\";\nimport {Col, FloatingLabel, Form, Row} from \"react-bootstrap\";\nimport TransformEngine from \"../base/TransformEngine\";\nimport TransformEngineComponent from \"./TransformEngineComponent\";\n\nexport const Main = () => {\n  const [input, setInput] = useState<string>(\"\");\n  const [engine, setEngine] = useState<TransformEngine>(new TransformEngine());\n  const [output, setOutput] = useState<string>(\"\");\n\n  useEffect(() => {\n    setOutput(engine.transformData(input))\n  }, [engine, input])\n\n  return (\n      <div className=\"Main\">\n        <Row>\n          <Col md={{span: 8, offset: 2}}>\n            <FloatingLabel controlId=\"inputTextArea\" label=\"Input\">\n              <Form.Control\n                  as=\"textarea\"\n                  placeholder=\"Paste\"\n                  style={{height: '100px'}}\n                  onChange={(event) => {\n                    setInput(event.currentTarget.value)\n                  }}\n              />\n            </FloatingLabel>\n          </Col>\n        </Row>\n        <Row>\n          <Col md={{span: 6, offset: 3}}>\n            <TransformEngineComponent\n                onChange={setEngine}/>\n          </Col>\n        </Row>\n        <Row>\n          <Col md={{span: 8, offset: 2}}>\n            <FloatingLabel controlId=\"outputTextArea\" label=\"Output\">\n              <Form.Control\n                  as=\"textarea\"\n                  placeholder=\"Paste\"\n                  style={{height: '100px'}}\n                  value={output}\n                  readOnly={true}\n              />\n            </FloatingLabel>\n          </Col>\n        </Row>\n      </div>\n  )\n}\n\nexport default Main\n\n","import {Container} from 'react-bootstrap';\nimport './App.css';\nimport Main from \"./pkg/ui/Main\";\n\nconst App = () => (\n    <div className=\"App\">\n      <Container fluid={\"md\"}>\n        <Main/>\n      </Container>\n    </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}